{% extends 'base/base.html' %}
{% load static %}
{% block head_title %}
    Inicio del sitio
{% endblock head_title %}
{% block contenido %}
<style>
		{% for d in Departamentos%}
		#chartdivpie{{d.id}} {
			width: 80%;
			height: 80%;
		}
		{% endfor %}
		
		</style>
 <!-- Begin Page Content -->
 <div class="container-fluid">        
		<!-- tabs de departamentos -->		
		<nav>
  	<div class="nav nav-tabs" id="nav-tab" role="tablist">
		{% for d in Departamentos%}
				{% if d.pk == 3%}			
					<a class="nav-item nav-link active" id="nav-{{d.descripcion}}-tab" data-toggle="tab" href="#nav-{{d.pk}}" role="tab" aria-controls="nav-{{d.pk}}" aria-selected="true">{{d.descripcion}}</a>				
				{% else %}				
					<a class="nav-item nav-link" id="nav-{{d.pk}}-tab" data-toggle="tab" href="#nav-{{d.pk}}" role="tab" aria-controls="nav-{{d.pk}}" aria-selected="false">{{d.descripcion}}</a>				
					{% endif %}
		{% endfor %}		
		</div>
	</nav>
		
	<div class="tab-content" id="nav-tabContent">
		{% for d in Departamentos%}		
				{% if d.pk == 3%}
				<div class="tab-pane fade show active" id="nav-{{d.pk}}" role="tabpanel" aria-labelledby="nav-{{d.pk}}-tab">
						<div class="card">
								<div class="card-header">
								<h6 class="m-0 font-weight-bold text-primary">Migrantes Internos por Genero {{d.descripcion}} Pastel </h6>
								</div>
								<div class="card-body">
								<div class="chart-bar">
										<div id="chartdivpie{{d.pk}}"></div>
								</div>
								<hr>
								Grafico que representa los  Migrantes Internos registrados en el sistema
								</div>
						</div>
						<div class="card">
								<div class="card-header">
								<h6 class="m-0 font-weight-bold text-primary">Migrantes Internos por Genero {{d.descripcion}} Barras </h6>
								</div>
								<div class="card-body">
								<div class="chart-bar">
										<div id="chartdivbar{{d.pk}}"></div>
								</div>
								<hr>
								Grafico que representa los  Migrantes Internos registrados en el sistema
								</div>
						</div>
				</div>
				{% else %}
				<div class="tab-pane fade" id="nav-{{d.pk}}" role="tabpanel" aria-labelledby="nav-{{d.pk}}-tab">
						<div class="card">
								<div class="card-header">
								<h6 class="m-0 font-weight-bold text-primary">Migrantes Internos por Genero {{d.descripcion}} Pastel</h6>
								</div>
								<div class="card-body">
								<div class="chart-bar">
										<div id="chartdivpie{{d.pk}}"></div>
								</div>
								<hr>
								Grafico que representa los  Migrantes Internos registrados en el sistema
								</div>
						</div>
						<div class="card">
								<div class="card-header">
								<h6 class="m-0 font-weight-bold text-primary">Migrantes Internos por Genero {{d.descripcion}} Barras</h6>
								</div>
								<div class="card-body">
								<div class="chart-bar">
										<div id="chartdivbar{{d.pk}}"></div>
								</div>
								<hr>
								Grafico que representa los  Migrantes Internos registrados en el sistema
								</div>
						</div>
				</div>		
				{% endif %}				
		{% endfor %}	
	</div>								
  </div>		
	<!-- /.container-fluid -->
	<!-- Resources -->
	<script src="{% static 'base/js/graficos/core.js' %}"></script>	
	<script src="{% static 'base/js/graficos/charts.js' %}"></script>
	<script src="{% static 'base/js/graficos/animated.js' %}"></script>		
	<script src="https://www.amcharts.com/lib/4/themes/frozen.js"></script>

  <script src="{% static 'base/js/jquery.min.js' %}"></script>
  <script src="{% static 'base/js/bootstrap.bundle.min.js' %}"></script>

  <!-- Core plugin JavaScript-->
  <script src="{% static 'base/js/jquery.easing.min.js' %}"></script>

  <!-- Custom scripts for all pages-->
  <script src="{% static 'base/js/sb-admin-2.min.js' %}"></script>

  <!-- Page level plugins -->
  <script src="{% static 'base/vendor/chart.js/Chart.min.js' %}"></script>

  <!-- Page level custom scripts archivos -->
  <!--<script src="{% static 'base/js/demo/chart-area-demo.js' %}"></script>-->
<script>
am4core.ready(function() {

// Themes begin
am4core.useTheme(am4themes_frozen);
am4core.useTheme(am4themes_animated);

{% for d in departamentos_graficos %}
// Primer Grafico Pastel
var {{d.chart}} = am4core.create("{{d.div}}", am4charts.PieChart3D);
{{d.chart}}.hiddenState.properties.opacity = 0; // this creates initial fade-in
{{d.chart}}.data = [
  {% for p in productos %}	
		{% if p.pk  == d.id %}			
      {	
				{% if p.Genero == '1' %}	
				"country" : "Masculino",
				{%else%}
				"country" : "Femenino",
				{% endif %}
				"litres" : {{p.Cantidad}} 
			},
		 {% endif %}
			{%endfor%}];
			//{{d.chart}}.innerRadius = am4core.percent(40);
			//{{d.chart}}.depth = 120;
			{{d.chart}}.legend = new am4charts.Legend();
var series = {{d.chart}}.series.push(new am4charts.PieSeries3D());
series.dataFields.value = "litres";
//series.dataFields.depthValue = "litres";
series.dataFields.category = "country";
//series.slices.template.cornerRadius = 5;
//series.colors.step = 3;
// cointainer to hold both charts
// Create axes
// Grafico de Barras


var {{d.chart1}} = am4core.create("{{d.div1}}", am4charts.XYChart);
{{d.chart1}}.data = [
  {% for p in productos %}	
		{% if p.pk  == d.id %}			
      {	
				{% if p.Genero == '1' %}	
				"country" : "Masculino",
				{%else%}
				"country" : "Femenino",
				{% endif %}
				"visits" : {{p.Cantidad}} 
			},
		 {% endif %}
			{%endfor%}];
var categoryAxis = {{d.chart1}}.xAxes.push(new am4charts.CategoryAxis());


categoryAxis.dataFields.category = "country";
categoryAxis.renderer.grid.template.location = 0;
categoryAxis.renderer.minGridDistance = 60;

categoryAxis.renderer.labels.template.adapter.add("dy", function(dy, target) {
  if (target.dataItem && target.dataItem.index & 2 == 2) {
    return dy + 25;
  }
  return dy;
});

var valueAxis = {{d.chart1}}.yAxes.push(new am4charts.ValueAxis());

// Create series
var series = {{d.chart1}}.series.push(new am4charts.ColumnSeries());
series.dataFields.valueY = "visits";
series.dataFields.categoryX = "country";
series.name = "Visits";
series.columns.template.tooltipText = "{categoryX}: [bold]{valueY}[/]";
series.columns.template.fillOpacity = .8;

var columnTemplate = series.columns.template;
columnTemplate.strokeWidth = 1;
columnTemplate.strokeOpacity = 1;
{%endfor%}
});

</script>


{% endblock contenido%}
